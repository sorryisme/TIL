# JVM





## 자바 성능 튜닝 이야기 

- HotSpot VM의 구조
- JIT 옵티마이저
- JVM의 구동절차
- JVM의 종료절차
- 클래스 로딩의 절차
- 예외 처리의 절차



### HotSpot VM의 구성

- 자바의 성능을 개선하기 위해 JIT 컴파일러 개발
  - 프로그램의 성능에 영향을 주는 지점에 대해 지속적으로 분석
  - 분석된 지점은 부하를 최소화 하고 높은 성능을 내기 위한 최적화 대상
- HotSpot VM은 세 가지 컴포넌트로 구성
  - VM 런타임
  - JIT 컴파일러
  - 메모리 관리자



### JIT Optimizer 

- JIT 컴파일러는 Client 버전과 Server버전이 있음
- 컴파일은 상위레벨의 언어 -> 기계 의존적인 코드로 변환
- JIT는 각각의 메서드를 모두 컴파일 하지 않음
  - 모든 코드는 초기에 인터프리터에 의해서 시작
  - 해당 코드가 많이 사용될 경우 컴파일 대상
  - 각 메서드에 카운터를 통해 통제
  - 메서드에는 두 개의 카운터가 존재
    - 수행 카운터(invocation counter) : 메서드를 시작할 때 증가
    - 백에지 카운터(backed counter) : 높은 바이트 코드 인덱스에서 낮은 인덱스로 컨트롤 흐름이 변경될 때 증가
      - 메서드 루프가 존재하는지 확인할 때 사용
      - 수행 카운터보다 우선 순위가 높음
  - 카운터 한계치 도달 시 인터프리터가 컴파일을 요청 

